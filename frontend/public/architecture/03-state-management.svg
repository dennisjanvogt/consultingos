<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 550" font-family="system-ui, -apple-system, sans-serif">
  <defs>
    <linearGradient id="zustandGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#a855f7"/>
    </linearGradient>
    <filter id="shadow3" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-opacity="0.1"/>
    </filter>
  </defs>

  <!-- Title -->
  <text x="425" y="35" text-anchor="middle" font-size="22" font-weight="600" fill="#1f2937">State Management (Zustand)</text>
  <text x="425" y="55" text-anchor="middle" font-size="12" fill="#6b7280">Centralized State with Persistence</text>

  <!-- Main Container -->
  <rect x="30" y="75" width="790" height="400" rx="12" fill="#faf5ff" stroke="#c4b5fd" stroke-width="2"/>
  <rect x="30" y="75" width="790" height="35" rx="12" fill="url(#zustandGrad)"/>
  <rect x="30" y="95" width="790" height="15" fill="url(#zustandGrad)"/>
  <text x="425" y="98" text-anchor="middle" font-size="14" font-weight="600" fill="white">ZUSTAND STORES</text>

  <!-- Row 1: Core Stores -->
  <text x="60" y="140" font-size="11" font-weight="600" fill="#7c3aed">CORE</text>

  <!-- windowStore -->
  <rect x="60" y="150" width="180" height="100" rx="8" fill="white" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="60" y="150" width="180" height="28" rx="8" fill="#8b5cf6"/>
  <rect x="60" y="168" width="180" height="10" fill="#8b5cf6"/>
  <text x="150" y="170" text-anchor="middle" font-size="12" font-weight="600" fill="white">windowStore</text>
  <text x="70" y="200" font-size="10" fill="#4b5563">windows[]</text>
  <text x="70" y="215" font-size="10" fill="#4b5563">activeWindowId</text>
  <text x="70" y="230" font-size="10" fill="#4b5563">stageManagerEnabled</text>
  <text x="70" y="245" font-size="10" fill="#4b5563">zIndex, tileWindows()</text>

  <!-- authStore -->
  <rect x="260" y="150" width="180" height="100" rx="8" fill="white" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="260" y="150" width="180" height="28" rx="8" fill="#8b5cf6"/>
  <rect x="260" y="168" width="180" height="10" fill="#8b5cf6"/>
  <text x="350" y="170" text-anchor="middle" font-size="12" font-weight="600" fill="white">authStore</text>
  <text x="270" y="200" font-size="10" fill="#4b5563">user: User | null</text>
  <text x="270" y="215" font-size="10" fill="#4b5563">isAuthenticated</text>
  <text x="270" y="230" font-size="10" fill="#4b5563">isPending (approval)</text>
  <text x="270" y="245" font-size="10" fill="#4b5563">login(), logout()</text>

  <!-- aiStore -->
  <rect x="460" y="150" width="180" height="100" rx="8" fill="white" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="460" y="150" width="180" height="28" rx="8" fill="#8b5cf6"/>
  <rect x="460" y="168" width="180" height="10" fill="#8b5cf6"/>
  <text x="550" y="170" text-anchor="middle" font-size="12" font-weight="600" fill="white">aiStore</text>
  <text x="470" y="200" font-size="10" fill="#4b5563">conversations[]</text>
  <text x="470" y="215" font-size="10" fill="#4b5563">chatModel, imageModel</text>
  <text x="470" y="230" font-size="10" fill="#4b5563">helpers[]</text>
  <text x="470" y="245" font-size="10" fill="#4b5563">currentMessages</text>

  <!-- appSettingsStore -->
  <rect x="660" y="150" width="145" height="100" rx="8" fill="white" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="660" y="150" width="145" height="28" rx="8" fill="#8b5cf6"/>
  <rect x="660" y="168" width="145" height="10" fill="#8b5cf6"/>
  <text x="732" y="170" text-anchor="middle" font-size="11" font-weight="600" fill="white">appSettingsStore</text>
  <text x="670" y="200" font-size="10" fill="#4b5563">enabled_apps[]</text>
  <text x="670" y="215" font-size="10" fill="#4b5563">dock_order[]</text>
  <text x="670" y="230" font-size="10" fill="#4b5563">syncWithBackend()</text>

  <!-- Row 2: Domain Stores -->
  <text x="60" y="280" font-size="11" font-weight="600" fill="#059669">DOMAIN</text>

  <!-- calendarStore -->
  <rect x="60" y="290" width="145" height="85" rx="8" fill="white" stroke="#10b981" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="60" y="290" width="145" height="25" rx="8" fill="#10b981"/>
  <rect x="60" y="308" width="145" height="7" fill="#10b981"/>
  <text x="132" y="308" text-anchor="middle" font-size="11" font-weight="600" fill="white">calendarStore</text>
  <text x="70" y="335" font-size="10" fill="#4b5563">events[]</text>
  <text x="70" y="350" font-size="10" fill="#4b5563">addEvent()</text>
  <text x="70" y="365" font-size="10" fill="#4b5563">deleteEvent()</text>

  <!-- customersStore -->
  <rect x="220" y="290" width="145" height="85" rx="8" fill="white" stroke="#10b981" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="220" y="290" width="145" height="25" rx="8" fill="#10b981"/>
  <rect x="220" y="308" width="145" height="7" fill="#10b981"/>
  <text x="292" y="308" text-anchor="middle" font-size="11" font-weight="600" fill="white">customersStore</text>
  <text x="230" y="335" font-size="10" fill="#4b5563">customers[]</text>
  <text x="230" y="350" font-size="10" fill="#4b5563">fetch/CRUD</text>
  <text x="230" y="365" font-size="10" fill="#4b5563">searchQuery</text>

  <!-- kanbanStore -->
  <rect x="380" y="290" width="145" height="85" rx="8" fill="white" stroke="#10b981" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="380" y="290" width="145" height="25" rx="8" fill="#10b981"/>
  <rect x="380" y="308" width="145" height="7" fill="#10b981"/>
  <text x="452" y="308" text-anchor="middle" font-size="11" font-weight="600" fill="white">kanbanStore</text>
  <text x="390" y="335" font-size="10" fill="#4b5563">tasks by board</text>
  <text x="390" y="350" font-size="10" fill="#4b5563">activeBoard</text>
  <text x="390" y="365" font-size="10" fill="#4b5563">moveTask()</text>

  <!-- timetrackingStore -->
  <rect x="540" y="290" width="145" height="85" rx="8" fill="white" stroke="#10b981" stroke-width="2" filter="url(#shadow3)"/>
  <rect x="540" y="290" width="145" height="25" rx="8" fill="#10b981"/>
  <rect x="540" y="308" width="145" height="7" fill="#10b981"/>
  <text x="612" y="308" text-anchor="middle" font-size="10" font-weight="600" fill="white">timetrackingStore</text>
  <text x="550" y="335" font-size="10" fill="#4b5563">timer, entries[]</text>
  <text x="550" y="350" font-size="10" fill="#4b5563">projects[], clients[]</text>
  <text x="550" y="365" font-size="10" fill="#4b5563">start/stop/pause</text>

  <!-- More stores indicator -->
  <rect x="700" y="290" width="105" height="85" rx="8" fill="#f0fdf4" stroke="#86efac" stroke-width="2" stroke-dasharray="4,3"/>
  <text x="752" y="325" text-anchor="middle" font-size="10" fill="#059669">+ 8 more</text>
  <text x="752" y="345" text-anchor="middle" font-size="9" fill="#6b7280">invoices</text>
  <text x="752" y="358" text-anchor="middle" font-size="9" fill="#6b7280">documents</text>
  <text x="752" y="371" text-anchor="middle" font-size="9" fill="#6b7280">chess, etc.</text>

  <!-- Persistence Layer -->
  <rect x="60" y="395" width="360" height="65" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" filter="url(#shadow3)"/>
  <text x="240" y="420" text-anchor="middle" font-size="12" font-weight="600" fill="#92400e">localStorage Persistence</text>
  <text x="240" y="440" text-anchor="middle" font-size="10" fill="#6b7280">windowStore, pomodoroStore positions</text>
  <text x="240" y="455" text-anchor="middle" font-size="10" fill="#6b7280">via zustand/middleware persist</text>

  <rect x="440" y="395" width="360" height="65" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" filter="url(#shadow3)"/>
  <text x="620" y="420" text-anchor="middle" font-size="12" font-weight="600" fill="#1d4ed8">Backend API Sync</text>
  <text x="620" y="440" text-anchor="middle" font-size="10" fill="#6b7280">authStore, aiStore, appSettingsStore</text>
  <text x="620" y="455" text-anchor="middle" font-size="10" fill="#6b7280">All domain stores fetch from /api/*</text>

  <!-- Arrows -->
  <path d="M150 250 L150 270 L240 270 L240 395" stroke="#f59e0b" stroke-width="1.5" fill="none" marker-end="url(#arrow3)"/>
  <path d="M550 250 L550 270 L620 270 L620 395" stroke="#3b82f6" stroke-width="1.5" fill="none" marker-end="url(#arrow3)"/>

  <!-- Legend -->
  <rect x="30" y="490" width="790" height="45" rx="6" fill="#f9fafb" stroke="#e5e7eb"/>
  <rect x="50" y="505" width="12" height="12" rx="2" fill="#8b5cf6"/>
  <text x="70" y="515" font-size="10" fill="#4b5563">Core Stores</text>
  <rect x="150" y="505" width="12" height="12" rx="2" fill="#10b981"/>
  <text x="170" y="515" font-size="10" fill="#4b5563">Domain Stores</text>
  <rect x="270" y="505" width="12" height="12" rx="2" fill="#f59e0b"/>
  <text x="290" y="515" font-size="10" fill="#4b5563">localStorage</text>
  <rect x="380" y="505" width="12" height="12" rx="2" fill="#3b82f6"/>
  <text x="400" y="515" font-size="10" fill="#4b5563">Backend Sync</text>

  <defs>
    <marker id="arrow3" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#6b7280"/>
    </marker>
  </defs>
</svg>
